<div class="card">
  <p-toast></p-toast>
  <div style="overflow-x: auto">
    <p-table
      [value]="stockKarts"
      dataKey="id"
      editMode="row"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 15%">Stock Code</th>
          <th style="width: 14%">Case Brand</th>
          <th style="width: 14%">Case Model Variations</th>
          <th style="width: 14%">Case Model Title</th>
          <th style="width: 14%">Description</th>
          <th style="width: 14%">Barcode</th>
        </tr>
      </ng-template>
      <ng-template
        pTemplate="body"
        let-stockKart
        let-editing="editing"
        let-ri="rowIndex"
      >
        <tr [pEditableRow]="stockKart">
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input
                  pInputText
                  type="text"
                  [(ngModel)]="stockKart.stockCode"
                />
              </ng-template>
              <ng-template pTemplate="output">
                {{ stockKart.stockCode }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input
                  pInputText
                  type="text"
                  [(ngModel)]="stockKart.CaseBrand"
                  required
                />
              </ng-template>
              <ng-template pTemplate="output">
                {{ stockKart.CaseBrand }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input
                  pInputText
                  type="text"
                  [(ngModel)]="stockKart.CaseModelVariations"
                />
              </ng-template>
              <ng-template pTemplate="output">
                {{ stockKart.CaseModelVariations }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input
                  pInputText
                  type="text"
                  [(ngModel)]="stockKart.CaseModelTitle"
                />
              </ng-template>
              <ng-template pTemplate="output">
                {{ stockKart.CaseModelTitle }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input
                  pInputText
                  type="text"
                  [(ngModel)]="stockKart.Description"
                />
              </ng-template>
              <ng-template pTemplate="output">
                {{ stockKart.Description }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input pInputText type="text" [(ngModel)]="stockKart.Barcode" />
              </ng-template>
              <ng-template pTemplate="output">
                {{ stockKart.Barcode }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <div class="flex align-items-center justify-content-center gap-2">
              <button
                *ngIf="!editing"
                pButton
                pRipple
                type="button"
                pInitEditableRow
                icon="pi pi-pencil"
                (click)="onRowEditInit(stockKart)"
                class="p-button-rounded p-button-text"
              ></button>
              <button
                *ngIf="editing"
                pButton
                pRipple
                type="button"
                pSaveEditableRow
                icon="pi pi-check"
                (click)="onRowEditSave(stockKart)"
                class="p-button-rounded p-button-text p-button-success mr-2"
              ></button>
              <button
                *ngIf="editing"
                pButton
                pRipple
                type="button"
                pCancelEditableRow
                icon="pi pi-times"
                (click)="onRowEditCancel(stockKart, ri)"
                class="p-button-rounded p-button-text p-button-danger"
              ></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
<div id="buttonsArea" class="card flex justify-content-center">
  <p-button
    id="CleanDbButton"
    label="Clean Database"
    severity="warning"
    (onClick)="cleanDb()"
  >
    <ng-template pTemplate="icon">
      <img src="../../../assets/icons/delete.ico" />
    </ng-template>
  </p-button>
</div>
