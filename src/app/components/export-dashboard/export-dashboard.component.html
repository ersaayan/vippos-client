<div class="card flex justify-content-center">
  <p-accordion
    class="w-full"
    expandIcon="pi pi-plus"
    collapseIcon="pi pi-minus"
  >
    <p-accordionTab *ngFor="let order of orders; let i = index">
      <ng-template pTemplate="header">
        <span
          class="flex justify-content-between align-items-center gap-2 w-full"
        >
          <span class="font-bold white-space-nowrap"> Order {{ i + 1 }} </span>
          <p-tag
            [value]="'Manufacturer Name: ' + order.user"
            severity="info"
            class="font-bold mr-auto ml-2"
          />

          <span class="font-bold white-space-nowrap ml-auto mr-2">
            Order Date: {{ order.createdAt | date : "dd/MM/yyyy" }}
          </span>
          <p-tag
            [value]="order.orderDetails.length + ' goods'"
            severity="secondary"
            class="mr-2"
          />
          <p-tag [value]="order.status" severity="info" class="mr-2" />
        </span>
      </ng-template>
      <p-table
        #dt1
        [value]="order.orderDetails"
        styleClass="p-datatable-striped"
        [tableStyle]="{ 'min-width': '50rem' }"
        [globalFilterFields]="[
          'caseBrand',
          'modelVariation',
          'phoneModel',
          'stockCode',
          'barcode',
          'quantity'
        ]"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20]"
      >
        <ng-template pTemplate="caption">
          <div class="flex justify-content-between flex-column sm:flex-row">
            <span class="p-input-icon-left mb-2">
              <i class="pi pi-search"></i>
              <input
                pInputText
                type="text"
                #filterta
                (input)="onGlobalFilter(dt1, $event)"
                placeholder="Search Keyword"
                class="w-full"
              />
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th>Case Image</th>
            <th>Case Brand</th>
            <th>Case Model</th>
            <th>Phone Model</th>
            <th>Stock Code</th>
            <th>Barcode</th>
            <th>Quantity</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-orderDetail>
          <tr>
            <td>
              <p-image
                [src]="'http://localhost:1303' + orderDetail.caseImage"
                width="50"
                [preview]="true"
                [alt]="orderDetail.brandName"
              />
            </td>
            <td>{{ orderDetail.brandName }}</td>
            <td>{{ orderDetail.caseModel }}</td>
            <td>{{ orderDetail.phoneName }}</td>
            <td>{{ orderDetail.stockCode.replace("//", "/") }}</td>
            <td>{{ orderDetail.barcode }}</td>
            <td>{{ orderDetail.quantity }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-accordionTab>
  </p-accordion>
</div>
